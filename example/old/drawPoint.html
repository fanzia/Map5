<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../css/bootstrap-3.2.0-dist/css/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/Map5.css"/>

<script type="text/javascript" src="../lib/jquery-1.11.1.js"></script>
<script type="text/javascript" src="../lib/bootstrap-3.2.0-dist/bootstrap.min.js"></script>
<!-- <script type="text/javascript" src="../lib/Map5.min.js"></script> -->

<script type="text/javascript" src="../lib/GeoBeans.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/BaseTypes/Class.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/BaseTypes/Envelope.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/BaseTypes/Color.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/BaseTypes/ColorRangeMap.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/User.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Map.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/MapManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/DBS/DBSManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/File/FileManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/TileDB/TileDBManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/RasterDB/RasterDBManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/GPS/GPSManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Poi/PoiManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Subscribe/SubManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Service/Service.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Service/ServiceManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/JobManager.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/Geometry.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/GeometryCollection.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/Point.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/LineString.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/Line/LinearRing.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/Polygon.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/MultiPoint.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/MultiLineString.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/MultiPolygon.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/Circle.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Geometry/GML.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/Label.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Label/PointLabel.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Field.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Feature.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/FeatureType.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Workspace.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/WFS/WFSWorkspace.js"></script>


<script type="text/javascript" src="../lib/GeoBeans/Transformation.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/Filter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/FilterReader.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/FilterWriter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/LogicFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/LogicFilter/BinaryLogicFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/ComparisionFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/ComparisionFilter/BinaryComparisionFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/IDFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/UnaryLogicFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/SpatialFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/SpatialFilter/BBoxFilter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/Expression.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/PropertyName.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Filter/Literal.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/MapWorkspace.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/Control.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Control/TrackControl.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Control/DragMapControl.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Control/SrollMapControl.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Control/MapNavControl.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Control/ZoomControl.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/Renderer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/StyleManager.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/ColorMap.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/StyleReader.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/StyleWriter.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/Rule.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/FeatureStyle.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Symbolizer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/PointSymbolizer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/LineSymbolizer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/PolygonSymbolizer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/TextSymbolizer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/Font.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/Stroke.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Style/Fill.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Events.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/InfoWindow.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/Layer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/Tile.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/TileCache.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/TileLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/TileLayer/QSLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/FeatureLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/WFSLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/DBLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/GroupLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/FeatureDBLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/OverlayLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/QueryLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/TileLayer/WMTSLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/PanoramaLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/ImageLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/ChartLayer.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Layer/chart/SymbolChartLayer.js"></script>

<script type="text/javascript" src="../lib/GeoBeans/Overlay.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Overlay/Marker.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Overlay/Polyline.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Overlay/Polygon.js"></script>
<script type="text/javascript" src="../lib/GeoBeans/Overlay/Circle.js"></script>

<script type="text/javascript">
	var mapObj = null;
	var mapName = "0311_1";
	var username = "user1";
	function init(){
		var user = new GeoBeans.User(username);
		var mapManager = user.getMapManager();
		mapObj = mapManager.getMap("mapDiv",mapName);
		if(mapObj == null){
			return;
		}
		mapObj.draw();
	}


	function addQuadServerLayer(){
		var layer = new GeoBeans.Layer.QSLayer("base","/QuadServer/maprequest?services=world_image");
		mapObj.setBaseLayer(layer);
		var viewer = mapObj.viewer;
		var level = mapObj.getLevel(viewer);
		if(level == null){
			level = 2;
		}
		var center = mapObj.center;
		if(center == null){
			center = new GeoBeans.Geometry.Point(0,0);	
		}
		mapObj.setCenter(center);
		mapObj.setLevel(level);	
		mapObj.draw();
	}



	function drawPoint(){
		// var point = new GeoBeans.Geometry.Point(117.2148,39.0281);
		var renderer = mapObj.renderer;
		for(var i = 0; i < 100;++i){
			var x = Math.random() * (118.063406 - 116.702314 ) + 116.702314;
			var y = Math.random() * (40.252049 - 38.554891 ) + 38.554891;
			var point = new GeoBeans.Geometry.Point(x,y);
			var color1 = new GeoBeans.Color();
			// color1.setByHex("#B080D7",0.9);
			// color1.setByHex("#6b0fb2",1);
			// color1.setByHex("#5CA2D1",0.5);
			var color = "#5CA2D1";
			var color2 = new GeoBeans.Color();
			// color2.setByHex("#EBDEF4",0.2);
			color2.setByHex("#5CA2D1",0.1);
			var radius = Math.random() * (20 - 11) + 10;
			radiusOuter = radius + 10;
			renderer.drawRing(point,radius,radiusOuter,color,0.5,0.1,mapObj.transformation);
		}
		
		for(var i = 0; i < 1000;++i){
			var x = Math.random() * (118.063406 - 116.702314 ) + 116.702314;
			var y = Math.random() * (40.252049 - 38.554891 ) + 38.554891;
			var point = new GeoBeans.Geometry.Point(x,y);
			var color1 = new GeoBeans.Color();
			// color1.setByHex("#B080D7",0.9);
			// color1.setByHex("#6b0fb2",1);
			color1.setByHex("#2167AB",0.5);

			var color2 = new GeoBeans.Color();
			// color2.setByHex("#EBDEF4",0.2);
			color2.setByHex("#2167AB",0.1);
			var radius = Math.random() * (20 - 11) + 10;
			// renderer.drawRing(point,radius,12,color1,color2,mapObj.transformation);
		}
		for(var i = 0; i < 1000;++i){
			var x = Math.random() * (118.063406 - 116.702314 ) + 116.702314;
			var y = Math.random() * (40.252049 - 38.554891 ) + 38.554891;
			var point = new GeoBeans.Geometry.Point(x,y);
			var color1 = new GeoBeans.Color();
			// color1.setByHex("#B080D7",0.9);
			// color1.setByHex("#6b0fb2",1);
			color1.setByHex("#6B0FB2",0.5);

			var color2 = new GeoBeans.Color();
			// color2.setByHex("#EBDEF4",0.2);
			color2.setByHex("#6B0FB2",0.1);
			var radius = Math.random() * (20 - 11) + 10;
			// renderer.drawRing(point,radius,12,color1,color2,mapObj.transformation);
		}

		// var symbolizer = new GeoBeans.Symbolizer.PointSymbolizer();
		// renderer.setSymbolizer(symbolizer);
		// renderer.drawPoint(point,symbolizer,mapObj.transformation);
		// var color1 = new GeoBeans.Color();
		// color1.setByHex("#B080D7",0.5);

		// var color2 = new GeoBeans.Color();
		// color2.setByHex("#EBDEF4",0.5);
		// renderer.drawRing(point,10,10,color1,color2,mapObj.transformation);
		// mapObj.draw();
	}
	

</script>
<body onload="init()">
	<h5>测试页面，非示例页面</h5>

	<button onclick="addQuadServerLayer()">加载QuadServer图层</button>
	<button onclick="drawPoint()">draw point</button>
	<div id="mapDiv" style="height:800px;width:100%;position:absolute;top:80px;">
	</div>
	
</body>