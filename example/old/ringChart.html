<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../css/bootstrap-3.2.0-dist/css/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/Map5.css"/>

<script type="text/javascript" src="../lib/jquery-1.11.1.js"></script>
<script type="text/javascript" src="../lib/bootstrap-3.2.0-dist/bootstrap.min.js"></script>
<script type="text/javascript" src="../lib/Map5.min.js"></script>


<script type="text/javascript">
	var mapObj = null;
	var username = "user1";
	var mapName = "chart2";
	function init(){
		var user = new GeoBeans.User(username);
		var mapManager = user.getMapManager();
		mapObj = mapManager.getMap("mapDiv",mapName);
		if(mapObj == null){
			alert("没有该地图");
			return;
		}
		mapObj.draw();
	}

	function addChart(){
		var name = "tu";
		var baseLayerName = "china_prov_point";
		var baseLayerField = "prov_fname";
		var dbName = "gisdb";
		var tableName = "gongye";
		var tableField = "地区";
		var chartFields = ["发电量_亿千瓦小时"];


		var chartOption = {
			maxsize : 30,
			outerRadius : 20,
			color : "#6b0fb2",
			opacityInner : 0.5,
			opacityOuter : 0.1
		};

		var layer = new GeoBeans.Layer.RingChartLayer(name,baseLayerName,baseLayerField,dbName,tableName,tableField,chartFields,chartOption);
		mapObj.addLayer(layer,null);
		mapObj.draw();

	}


	function addChart2(){
		var name = "gangcai";
		var baseLayerName = "china_prov_point";
		var baseLayerField = "prov_fname";
		var dbName = "gisdb";
		var tableName = "gongye";
		var tableField = "地区";
		var chartFields = ["钢材产量_万吨"];


		var chartOption = {
			maxsize : 30,
			outerRadius : 20,
			color : "#0097c3",
			opacityInner : 0.5,
			opacityOuter : 0.1
		};

		var layer = new GeoBeans.Layer.RingChartLayer(name,baseLayerName,baseLayerField,dbName,tableName,tableField,chartFields,chartOption);
		mapObj.addLayer(layer,null);
		mapObj.draw();

	} 


	function aqi(){
		var name = "aqi";
		var baseLayerName = "gc_aqi_city";
		var baseLayerField = "name";
		var dbName = "base";
		var tableName = "gc_aqi_ranking_2016_01_04_12";
		var tableField = "area";
		var chartFields = ["aqi"];		
		var chartOption = {
			maxsize : 30,
			outerRadius : 20,
			color : "#5CA2D1",
			opacityInner : 0.5,
			opacityOuter : 0.1
		};


		var layer = new GeoBeans.Layer.RingChartLayer(name,baseLayerName,baseLayerField,dbName,tableName,tableField,chartFields,chartOption);
		mapObj.addLayer(layer,null);
		mapObj.draw();
	}

</script>
<body onload="init()">
	<button onclick="addChart()">发电量</button>
	<button onclick="addChart2()">钢铁量</button>
	<button onclick="aqi()">aqi</button>
	<div id="mapDiv" style="height:800px;width:100%;position:absolute;top:30px;">
	</div>
	
</body>